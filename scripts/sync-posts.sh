#!/bin/bash

# ==========================================
# æ–‡ç« åŒæ­¥è„šæœ¬
# ==========================================
# ç”¨æ³•ï¼š./scripts/sync-posts.sh

set -e

echo "============================================================"
echo "ğŸ“ æ–‡ç« åŒæ­¥è„šæœ¬"
echo "============================================================"
echo ""

# æ£€æŸ¥æ˜¯å¦åœ¨é¡¹ç›®æ ¹ç›®å½•
if [ ! -d "backend" ] || [ ! -d "content" ]; then
    echo "âŒ é”™è¯¯ï¼šè¯·åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œæ­¤è„šæœ¬"
    exit 1
fi

# è¿›å…¥ backend ç›®å½•
cd backend

echo "ğŸ”„ æ­£åœ¨åŒæ­¥æ–‡ç« ..."
echo ""

# è®¾ç½®ç¯å¢ƒå˜é‡å¹¶è¿è¡ŒåŒæ­¥è„šæœ¬
CONTENT_DIR=../content uv run python scripts/sync_git_content.py

echo ""
echo "============================================================"
echo "âœ… æ–‡ç« åŒæ­¥å®Œæˆï¼"
echo "============================================================"
