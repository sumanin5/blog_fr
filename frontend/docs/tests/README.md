# å‰ç«¯é›†æˆæµ‹è¯•æ–‡æ¡£

è¿™æ˜¯ä¸€å¥—å®Œæ•´çš„å‰ç«¯é›†æˆæµ‹è¯•æ–¹æ¡ˆæ–‡æ¡£ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨çœŸå®çš„åç«¯ API è¿›è¡Œå‰ç«¯æµ‹è¯•ï¼Œè€Œä¸æ˜¯ä¾èµ– Mockã€‚

## ğŸ“š æ–‡æ¡£ç›®å½•

### 1. [é›†æˆæµ‹è¯•æ¦‚è§ˆ](./01-integration-testing-overview.md)

- ä»€ä¹ˆæ˜¯é›†æˆæµ‹è¯•ï¼Ÿ
- ä¸ºä»€ä¹ˆéœ€è¦çœŸå®çš„é›†æˆæµ‹è¯•ï¼Ÿ
- æˆ‘ä»¬çš„æ–¹æ¡ˆï¼šTest Server + Isolated DB
- ä¸å…¶ä»–æµ‹è¯•æ–¹æ¡ˆå¯¹æ¯”

### 2. [æµ‹è¯•æœåŠ¡å™¨æ¶æ„](./02-test-server-architecture.md)

- æ•´ä½“æ¶æ„è®¾è®¡
- æ•°æ®åº“éš”ç¦»åŸç†
- æµ‹è¯•åé—¨ API
- ä¾èµ–æ³¨å…¥è¦†ç›–
- å®‰å…¨æ€§è€ƒè™‘

### 3. [å‰ç«¯æµ‹è¯•é…ç½®](./03-frontend-test-setup.md)

- Vitest é…ç½®æ”¹é€ 
- æµ‹è¯•å·¥å…·å‡½æ•°
- æµ‹è¯•ç”Ÿå‘½å‘¨æœŸç®¡ç†
- API å®¢æˆ·ç«¯é…ç½®
- è®¤è¯çŠ¶æ€ç®¡ç†

### 4. [ç¼–å†™æµ‹è¯•ç”¨ä¾‹](./04-writing-tests.md)

- æµ‹è¯• React Query Hooks
- æµ‹è¯•è®¤è¯æµç¨‹
- æµ‹è¯•å¤æ‚æŸ¥è¯¢å‚æ•°
- æµ‹è¯• Mutation æ“ä½œ
- æµ‹è¯•æ–‡ä»¶ä¸Šä¼ 

### 5. [æœ€ä½³å®è·µ](./05-best-practices.md)

- æµ‹è¯•éš”ç¦»åŸåˆ™
- æ•°æ®å‡†å¤‡ç­–ç•¥
- å¼‚æ­¥æµ‹è¯•æŠ€å·§
- é”™è¯¯å¤„ç†æµ‹è¯•
- æ€§èƒ½ä¼˜åŒ–
- è°ƒè¯•æŠ€å·§
- å¸¸è§é™·é˜±

### 6. [ä¼˜åŠ¿åˆ†æ](./06-benefits-analysis.md)

- ä¸ä¼ ç»Ÿæ–¹æ¡ˆå¯¹æ¯”
- æ ¸å¿ƒä¼˜åŠ¿è¯¦è§£
- æˆæœ¬æ•ˆç›Šåˆ†æ
- é€‚ç”¨åœºæ™¯åˆ†æ
- å›¢é˜Ÿåä½œä¼˜åŠ¿

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨

```bash
# ç»ˆç«¯ A
cd backend
python scripts/run_test_server.py
```

### 2. è¿è¡Œå‰ç«¯æµ‹è¯•

```bash
# ç»ˆç«¯ B
cd frontend
pnpm test
```

## ğŸ¯ æ ¸å¿ƒç†å¿µ

**ä¸ä½¿ç”¨ Mockï¼Œè€Œæ˜¯è¿æ¥çœŸå®çš„åç«¯ API**

```
å‰ç«¯æµ‹è¯• â†’ çœŸå® HTTP è¯·æ±‚ â†’ æµ‹è¯•æœåŠ¡å™¨ (:8001) â†’ æµ‹è¯•æ•°æ®åº“ (test.db)
```

## âœ¨ ä¸»è¦ä¼˜åŠ¿

- âœ… **çœŸå®æ€§**ï¼šæµ‹è¯•çœŸå®çš„ HTTP è¯·æ±‚ã€åºåˆ—åŒ–ã€ä¸­é—´ä»¶
- âœ… **å¥‘çº¦éªŒè¯**ï¼šè‡ªåŠ¨éªŒè¯å‰åç«¯æ¥å£å¥‘çº¦
- âœ… **ç«¯åˆ°ç«¯ä¿¡å¿ƒ**ï¼šè¦†ç›–æ•´ä¸ªæ•°æ®æµ
- âœ… **é‡æ„å®‰å…¨**ï¼šåç«¯é‡æ„æ—¶æµ‹è¯•èƒ½åŠæ—¶å‘ç°é—®é¢˜
- âœ… **é›¶æ±¡æŸ“**ï¼šå®Œå…¨éš”ç¦»çš„æµ‹è¯•ç¯å¢ƒ

## ğŸ“Š æµ‹è¯•æµç¨‹

```mermaid
sequenceDiagram
    participant Test as Vitest æµ‹è¯•
    participant API as æµ‹è¯•æœåŠ¡å™¨
    participant DB as æµ‹è¯•æ•°æ®åº“

    Test->>API: POST /test/db/reset
    API->>DB: æ¸…ç©ºæ‰€æœ‰è¡¨
    DB-->>API: å®Œæˆ

    Test->>API: GET /api/posts
    API->>DB: æŸ¥è¯¢æ•°æ®
    DB-->>API: è¿”å›ç»“æœ
    API-->>Test: JSON å“åº”

    Test->>Test: æ–­è¨€éªŒè¯
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯æµ‹è¯•**ï¼šVitest + React Testing Library
- **åç«¯**ï¼šFastAPI + SQLAlchemy
- **æ•°æ®åº“**ï¼šSQLite (æµ‹è¯•) / PostgreSQL (ç”Ÿäº§)
- **HTTP å®¢æˆ·ç«¯**ï¼š@hey-api/client-fetch

## ğŸ“– ç›¸å…³èµ„æº

- [PLAN.md](../../../PLAN.md) - é¡¹ç›®è®¡åˆ’
- [åç«¯æµ‹è¯•æ–‡æ¡£](../../../backend/docs/TESTING_STRATEGY.md)
- [API æ–‡æ¡£](../../api/)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æå‡ºæ”¹è¿›å»ºè®®å’Œæœ€ä½³å®è·µï¼

## ğŸ“ è®¸å¯

MIT License
