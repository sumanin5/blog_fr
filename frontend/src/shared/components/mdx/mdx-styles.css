/* ä»£ç å—è¯­æ³•é«˜äº®æ ·å¼è°ƒæ•´ */
/* è¡Œå†…ä»£ç  */
:not(pre) > code {
  @apply bg-muted text-primary rounded px-1.5 py-0.5 text-sm;
  font-family: var(--font-mono);
  word-break: normal;
}

/* ä»£ç å—å®¹å™¨ */
pre[class*="language-"] {
  @apply my-4 overflow-x-auto rounded-lg border p-4 text-sm leading-6;
  font-family: var(--font-mono) !important;
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
  font-weight: 600;
}

/* ä»£ç å—åŒ…è£…ï¼šä¸ºæµ®åŠ¨çš„è¯­è¨€æ ‡ç­¾/å¤åˆ¶æŒ‰é’®é¢„ç•™å®šä½ç©ºé—´ */
.code-wrapper {
  position: relative;
}

/* é¡¶éƒ¨ç•™ç™½ç»™æ ‡ç­¾/æŒ‰é’® */
.code-wrapper pre[class*="language-"] {
  padding-top: 2.5rem;
}

/* æ‚¬æµ®æ§ä»¶é»˜è®¤åŠé€æ˜ï¼Œhover å˜æ¸…æ™° */
.code-wrapper > button,
.code-wrapper > span {
  opacity: 0.9;
  transition: opacity 0.15s ease-in-out;
}

.code-wrapper:hover > button,
.code-wrapper:hover > span {
  opacity: 1;
}

/* ä»£ç å—å†…çš„ code */
pre[class*="language-"] > code {
  font-family: var(--font-mono) !important;
  background: transparent !important;
}

/*
 * äº®è‰²æ¨¡å¼ä»£ç å— - æµ…ç°èƒŒæ™¯
 */
:root:not(.dark) pre[class*="language-"] {
  background-color: var(--card) !important;
  border-color: #d0d7de;
  color: #24292f !important;
}

/* æš—è‰²æ¨¡å¼ä»£ç å— - æ·±è‰²èƒŒæ™¯ */
:root.dark pre[class*="language-"] {
  background-color: var(--card) !important;
  border-color: #27272a;
  color: #c9d1d9 !important;
}

/* ===== PrismJS è¯­æ³•é«˜äº® Token é¢œè‰² ===== */

/* â˜€ï¸ äº®è‰²æ¨¡å¼ Token é¢œè‰² (GitHub Light ä¸»é¢˜) */
/* åŸºç¡€æ–‡æœ¬é¢œè‰² */
:root:not(.dark) pre[class*="language-"] {
  color: #24292f;
}

/* æ³¨é‡Š */
:root:not(.dark) .token.comment,
:root:not(.dark) .token.prolog,
:root:not(.dark) .token.doctype,
:root:not(.dark) .token.cdata {
  color: #6e7781;
}

/* æ ‡ç‚¹ç¬¦å· */
:root:not(.dark) .token.punctuation {
  color: #24292f;
}

/* å…³é”®å­— (import, export, return, if, else) */
:root:not(.dark) .token.keyword,
:root:not(.dark) .token.atrule,
:root:not(.dark) .token.attr-value {
  color: #cf222e;
}

/* å‡½æ•°å */
:root:not(.dark) .token.function,
:root:not(.dark) .token.class-name {
  color: #8250df;
}

/* å­—ç¬¦ä¸² */
:root:not(.dark) .token.string,
:root:not(.dark) .token.attr-name {
  color: #0a3069;
}

/* å˜é‡ */
:root:not(.dark) .token.variable {
  color: #953800;
}

/* æ•°å­—ã€å¸ƒå°”å€¼ã€å¸¸é‡ */
:root:not(.dark) .token.number,
:root:not(.dark) .token.boolean,
:root:not(.dark) .token.constant,
:root:not(.dark) .token.symbol {
  color: #0550ae;
}

/* è¿ç®—ç¬¦ */
:root:not(.dark) .token.operator {
  color: #24292f;
}

/* ç±»åã€æ ‡ç­¾ */
:root:not(.dark) .token.selector,
:root:not(.dark) .token.tag {
  color: #116329;
}

/* å±æ€§å */
:root:not(.dark) .token.property {
  color: #0550ae;
}

/* ğŸŒ™ æš—è‰²æ¨¡å¼ Token é¢œè‰² (GitHub Dark ä¸»é¢˜) */
/* åŸºç¡€æ–‡æœ¬é¢œè‰² */
:root.dark pre[class*="language-"] {
  color: #c9d1d9;
}

:root.dark .token.comment,
:root.dark .token.prolog,
:root.dark .token.doctype,
:root.dark .token.cdata {
  color: #8b949e;
}

:root.dark .token.punctuation {
  color: #c9d1d9;
}

:root.dark .token.property,
:root.dark .token.tag,
:root.dark .token.boolean,
:root.dark .token.number,
:root.dark .token.constant,
:root.dark .token.symbol,
:root.dark .token.deleted {
  color: #ff7b72;
}

:root.dark .token.selector,
:root.dark .token.attr-name,
:root.dark .token.string,
:root.dark .token.char,
:root.dark .token.builtin,
:root.dark .token.inserted {
  color: #a5d6ff;
}

:root.dark .token.operator,
:root.dark .token.entity,
:root.dark .token.url,
:root.dark .language-css .token.string,
:root.dark .style .token.string {
  color: #79c0ff;
}

:root.dark .token.atrule,
:root.dark .token.attr-value,
:root.dark .token.keyword {
  color: #ff7b72;
}

:root.dark .token.function,
:root.dark .token.class-name {
  color: #d2a8ff;
}

:root.dark .token.regex,
:root.dark .token.important,
:root.dark .token.variable {
  color: #ffa657;
}

/* è¡Œå·æ ·å¼ */
.code-line {
  display: block;
  padding-left: 1em;
  padding-right: 1em;
  margin-left: -1em;
  margin-right: -1em;
}

.line-number::before {
  display: inline-block;
  width: 1.5em;
  text-align: right;
  margin-right: 1.5em;
  color: #6b7280;
  content: attr(line);
}

/* =========================================
   ğŸ› ï¸ å¼ºåˆ¶æ ·å¼è¦†ç›– (Fix Dark Mode Issues)
   ========================================= */

/* 1. ä¿®å¤ KaTeX å…¬å¼åœ¨æš—è‰²æ¨¡å¼ä¸‹ä¸å¯è§çš„é—®é¢˜ */
.dark .katex {
  color: var(--foreground) !important;
}
.dark .katex .katex-html {
  color: var(--foreground) !important;
}

/* 2. ä¿®å¤ Prose ç²—ä½“å­—åœ¨æš—è‰²æ¨¡å¼ä¸‹é¢œè‰²ä¸æ­£ç¡®çš„é—®é¢˜ */
.dark .prose strong {
  color: var(--foreground) !important;
}

/* 3. ä¿®å¤ Prose å¼ºè°ƒå­—(em)åœ¨æš—è‰²æ¨¡å¼ä¸‹çš„é¢œè‰² */
.dark .prose em {
  color: var(--foreground) !important;
}

/* =========================================
   ğŸ“± ç§»åŠ¨ç«¯å“åº”å¼ä¿®å¤ (Fix Overflow Issues)
   ========================================= */

/* 1. å¼ºåˆ¶å›¾ç‰‡ä¸è¶…è¿‡å®¹å™¨å®½åº¦ */
.prose img {
  max-width: 100%;
  height: auto;
}

/* 2. ä¹Ÿæ˜¯å¯¼è‡´ç§»åŠ¨ç«¯å¸ƒå±€è¢«æ’‘å¼€çš„å…ƒå‡¶ï¼šKatex å…¬å¼ */
/* ä¸º Katex å®¹å™¨æ·»åŠ æ°´å¹³æ»šåŠ¨ */
.katex-display {
  overflow-x: auto;
  overflow-y: hidden;
  padding: 0.5rem 0;
  max-width: 100%;
  -webkit-overflow-scrolling: touch;
}

/* 3. è¡¨æ ¼å“åº”å¼å®¹å™¨ */
/* Prose é»˜è®¤é€šå¸¸ä¼šå¤„ç†ï¼Œä½†ä¸ºäº†ä¿é™©èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥å¼ºåˆ¶è¡¨æ ¼å¤–å±‚ä¹Ÿæœ‰æ»šåŠ¨ */
.prose table {
  display: block;
  width: 100%;
  overflow-x: auto;
  max-width: 100%;
  -webkit-overflow-scrolling: touch;
}
